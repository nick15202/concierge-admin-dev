{"version":3,"sources":["null","ng://angular-instantsearch/utils.ts","ng://angular-instantsearch/base-widget.ts","ng://angular-instantsearch/version.ts","ng://angular-instantsearch/instantsearch/instantsearch.ts","ng://angular-instantsearch/breadcrumb/breadcrumb.ts","ng://angular-instantsearch/breadcrumb/breadcrumb.module.ts","ng://angular-instantsearch/clear-refinements/clear-refinements.ts","ng://angular-instantsearch/clear-refinements/clear-refinements.module.ts","ng://angular-instantsearch/current-refinements/current-refinements.ts","ng://angular-instantsearch/current-refinements/current-refinements.module.ts","ng://angular-instantsearch/hierarchical-menu/hierarchical-menu.ts","ng://angular-instantsearch/hierarchical-menu/hierarchical-menu-item.ts","ng://angular-instantsearch/hierarchical-menu/hierarchical-menu.module.ts","ng://angular-instantsearch/hits-per-page/hits-per-page.ts","ng://angular-instantsearch/hits-per-page/hits-per-page.module.ts","ng://angular-instantsearch/highlight/highlight.ts","ng://angular-instantsearch/highlight/highlight.module.ts","ng://angular-instantsearch/hits/hits.ts","ng://angular-instantsearch/hits/hits.module.ts","ng://angular-instantsearch/infinite-hits/infinite-hits.ts","ng://angular-instantsearch/infinite-hits/infinite-hits.module.ts","ng://angular-instantsearch/instantsearch/instantsearch.module.ts","ng://angular-instantsearch/menu/menu.ts","ng://angular-instantsearch/menu/menu.module.ts","ng://angular-instantsearch/numeric-menu/numeric-menu.ts","ng://angular-instantsearch/numeric-menu/numeric-menu.module.ts","ng://angular-instantsearch/numeric-selector/numeric-selector.ts","ng://angular-instantsearch/numeric-selector/numeric-selector.module.ts","ng://angular-instantsearch/pagination/pagination.ts","ng://angular-instantsearch/pagination/pagination.module.ts","ng://angular-instantsearch/range-slider/range-slider.ts","ng://angular-instantsearch/range-slider/range-slider.module.ts","ng://angular-instantsearch/refinement-list/refinement-list.ts","ng://angular-instantsearch/refinement-list/facets-search.ts","ng://angular-instantsearch/refinement-list/refinement-list.module.ts","ng://angular-instantsearch/search-box/search-box.ts","ng://angular-instantsearch/search-box/search-box.module.ts","ng://angular-instantsearch/sort-by/sort-by.ts","ng://angular-instantsearch/sort-by/sort-by.module.ts","ng://angular-instantsearch/rating-menu/rating-menu.ts","ng://angular-instantsearch/rating-menu/rating-menu.module.ts","ng://angular-instantsearch/stats/stats.ts","ng://angular-instantsearch/stats/stats.module.ts","ng://angular-instantsearch/toggle/toggle.ts","ng://angular-instantsearch/toggle/toggle.module.ts","ng://angular-instantsearch/range-input/range-input.ts","ng://angular-instantsearch/range-input/range-input.module.ts","ng://angular-instantsearch/panel/panel.ts","ng://angular-instantsearch/panel/panel.module.ts","ng://angular-instantsearch/configure/configure.ts","ng://angular-instantsearch/configure/configure.module.ts","ng://angular-instantsearch/create-ssr-algolia-client.ts","ng://angular-instantsearch/index.ts","ng://angular-instantsearch/parse-server-request.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","bem","widgetName","element","subElement","scoppedWidgetName","parseNumberInput","input","parseInt","noop","args","_i","Widget","BaseWidget","_this","state","updateState","isFirstRendering","Promise","resolve","then","cx","createWidget","connector","options","widget","ngOnInit","instantSearchParent","addWidget","ngOnDestroy","isPlatformBrowser","platformId","removeWidget","getItemClass","item","className","isRefined","Input","VERSION","algoliasearch","algoliasearchProxy.default","algoliasearchProxy","NgAisInstantSearch","instanceName","change","EventEmitter","onRender","emit","results","instantSearchInstance","helper","lastResults","createInstantSearchInstance","config","ngAfterViewInit","start","removeListener","dispose","searchParameters","highlightPreTag","highlightPostTag","urlSync","routing","searchClient","createAlgoliaClient","client","appId","apiKey","undefined","addAlgoliaAgent","AngularVersion","full","instantsearch","on","refresh","Component","selector","template","decorators","type","Inject","PLATFORM_ID","Output","NgAisBreadcrumb","_super","createURL","items","refine","tslib_1.__extends","defineProperty","autoHideContainer","map","idx","separator","isLast","connectBreadcrumb","attributes","rootPath","handleClick","event","preventDefault","stopPropagation","value","forwardRef","NgAisBreadcrumbModule","NgModule","declarations","entryComponents","exports","imports","CommonModule","NgAisClearRefinements","buttonLabel","clearsQuery","excludeAttributes","hasRefinements","connectClearAll","NgAisClearRefinementsModule","NgAisCurrentRefinements","clearRefinements","clearRefinementsLabel","onlyListedAttributes","clearAllClick","clearAllURL","refinements","transformItems","reduce","res","_a","attributeName","refinement","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__rest","match","find","r","push","label","charAt","toUpperCase","slice","JSON","stringify","connectCurrentRefinedValues","handleClearAllClick","NgAisCurrentRefinementsModule","NgAisHierarchicalMenu","limit","connectHierarchicalMenu","showParentLevel","sortBy","NgAisHierarchicalMenuItem","lvl","isArray","data","getListClass","potentialArray","NgAisHierarchicalMenuModule","NgAisHitsPerPage","connectHitsPerPage","NgAisHitsPerPageModule","get","require","NgAisHighlight","tagName","attribute","hit","highlighted","replaceWithTagName","attributeHighlighted","_highlightResult","fallback","console","warn","replace","RegExp","NgAisHighlightModule","NgAisHits","hits","connectHits","escapeHits","ContentChild","TemplateRef","NgAisHitsModule","NgAisInfiniteHits","showMoreLabel","isLastPage","showMore","connectInfiniteHits","NgAisInfiniteHitsModule","NgAisInstantSearchModule","forRoot","ngModule","providers","NgAisMenu","showLessLabel","canRefine","canToggleShowMore","isShowingMore","toggleShowMore","connectMenu","showMoreLimit","NgAisMenuModule","NgAisNumericMenu","connectNumericRefinementList","NgAisNumericMenuModule","NgAisNumericSelector","operator","currentRefinement","connectNumericSelector","NgAisNumericSelectorModule","range","NgAisPagination","showFirst","showLast","showPrevious","showNext","padding","nbHits","nbPages","pagesArray","Number","pagesPadding","minDelta","maxDelta","Math","abs","connectPagination","maxPages","totalPages","page","NgAisPaginationModule","NgAisRangeSlider","pips","tooltips","precision","min","max","animate","behaviour","connect","step","to","formatTooltip","density","mode","stepped","values","slider","noUiSlider.create","sliderContainer","nativeElement","noUiSlider","handleChange","disabled","updateOptions","toFixed","pow","connectRange","ViewChild","NgAisRangeSliderModule","NgAisRefinementList","searchPlaceholder","searchForItems","isFormSearch","connectRefinementList","escapeFacetValues","NgAisFacetsSearch","searchQuery","search","handleSubmit","NgAisRefinementListModule","NgAisSearchBox","placeholder","submitTitle","resetTitle","searchAsYouType","autofocus","submit","reset","focus","blur","query","connectSearchBox","searchBox","handleReset","NgAisSearchBoxModule","NgAisSortBy","connectSortBySelector","indices","NgAisSortByModule","NgAisRatingMenu","andUpLabel","hasNoResults","connectStarRating","NgAisRatingMenuModule","NgAisStats","hitPerPage","processingTimeMS","connectStats","NgAisStatsModule","NgAisToggle","off","connectToggle","NgAisToggleModule","NgAisRangeInput","currency","submitLabel","minInputValue","maxInputValue","target","NgAisRangeInputModule","NgAisPanel","NgAisPanelModule","NgAisConfigure","differs","internalSearchParameters","differ","connectConfigure","ngDoCheck","diff","KeyValueDiffers","NgAisConfigureModule","encode","encodeProxy.default","encodeProxy","createSSRSearchClient","httpClient","HttpHeaders","transferState","makeStateKey","_b","_request","rawUrl","opts","headers","set","method","url","includes","transferStateKey","body","hasKey","resp","parse","statusCode","status","reject","request","observe","subscribe","NGIS_MODULES","NgAisRootModule","NgAisModule","_","req","split","AlgoliaSearchHelper","getConfigurationFromQueryString"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","export function bem(widgetName: string) {\n  const cx = function(element?: string, subElement?: string) {\n    if (element) {\n      const scoppedWidgetName = `ais-${widgetName}-${element}`;\n\n      // output `ais-Widget-Header|Body|Footer ais-Header|Body|Footer`\n      if (element === 'header' || element === 'body' || element === 'footer') {\n        const nonScoppedWidgetName = `ais-${element}`;\n        return `${scoppedWidgetName} ${nonScoppedWidgetName}`;\n      }\n\n      // output `ais-Widget-Xyz--abc`\n      if (subElement) {\n        return `${scoppedWidgetName}--${subElement}`;\n      }\n\n      // output `ais-Widget-Xyz`\n      return scoppedWidgetName;\n    }\n\n    // output `ais-Widget`\n    return `ais-${widgetName}`;\n  };\n  return cx;\n}\n\nexport function parseNumberInput(input?: number | string) {\n  return typeof input === 'string' ? parseInt(input, 10) : input;\n}\n\nexport function noop(...args: any[]): void {}\n\nexport function capitalize(s) {\n  return s.charAt(0).toUpperCase() + s.slice(1);\n}\n","import { Input, OnDestroy, OnInit } from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\nimport { bem, noop } from './utils';\n\nexport class Widget {\n  public init: (\n    params: {\n      templatesConfig: object;\n      state: object;\n      results: object[];\n      createURL: (value: any) => string;\n      instantSearchInstance: object;\n    }\n  ) => void;\n  public getConfiguration?: () => object;\n  public render: (\n    params: {\n      templatesConfig: object;\n      state: object;\n      results: {}[];\n      createURL: (value: any) => string;\n      instantSearchInstance: object;\n    }\n  ) => void;\n  public dispose: (\n    params: {\n      helper: object;\n      state: object;\n    }\n  ) => object | void;\n}\n\nexport type Connector = (\n  renderFn: (state: object, isFirstRendering: boolean) => void,\n  unmountFn: () => void\n) => (widgetOptions?: object) => Widget;\n\nexport class BaseWidget implements OnInit, OnDestroy {\n  public instantSearchParent: any;\n\n  @Input() public autoHideContainer?: boolean;\n\n  public widget?: Widget;\n  public state?: object = {};\n  public cx: Function;\n\n  constructor(widgetName: string) {\n    this.cx = bem(widgetName);\n  }\n\n  public createWidget(connector: Connector, options: object = {}) {\n    this.widget = connector(this.updateState, noop)(options);\n  }\n\n  public ngOnInit() {\n    // add widget to the InstantSearch Instance\n    this.instantSearchParent.addWidget(this.widget);\n  }\n\n  public ngOnDestroy() {\n    if (isPlatformBrowser(this.instantSearchParent.platformId)) {\n      this.instantSearchParent.removeWidget(this.widget);\n    }\n  }\n\n  public updateState = (\n    state: {},\n    isFirstRendering: boolean\n  ): Promise<void> | void => {\n    if (isFirstRendering) {\n      return Promise.resolve().then(() => {\n        this.state = state;\n      });\n    }\n\n    this.state = state;\n  };\n\n  // helper method for genering item list className\n  public getItemClass(item: { isRefined?: boolean }) {\n    let className = this.cx('item');\n\n    if (item.isRefined) {\n      className = `${className} ${this.cx('item', 'selected')}`;\n    }\n\n    return className;\n  }\n}\n","export const VERSION = '2.3.0';\n","import {\n  AfterViewInit,\n  Component,\n  Input,\n  OnInit,\n  OnDestroy,\n  Output,\n  EventEmitter,\n  Inject,\n  PLATFORM_ID,\n  VERSION as AngularVersion,\n} from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\n\nimport * as algoliasearchProxy from 'algoliasearch/lite';\nimport instantsearch from 'instantsearch.js/es';\nimport { AlgoliaSearchHelper } from 'algoliasearch-helper';\n\nimport { Widget } from '../base-widget';\nimport { VERSION } from '../version';\n\nconst algoliasearch = algoliasearchProxy.default || algoliasearchProxy;\n\nexport type SearchRequest = {\n  indexName: string;\n  params: SearchRequestParameters;\n};\n\nexport type SearchForFacetValuesRequest = {\n  indexName: string;\n  params: SearchForFacetValuesRequestParameters;\n};\n\n// Documentation: https://www.algolia.com/doc/api-reference/search-api-parameters/\nexport type SearchParameters = {\n  // Attributes\n  attributesToRetrieve?: string[];\n  restrictSearchableAttributes?: string[];\n\n  // Filtering\n  filters?: string;\n  facetFilters?: string[];\n  optionalFilters?: string[];\n  numericFilters?: string[];\n  sumOrFiltersScores?: boolean;\n\n  // Faceting\n  facets?: string[];\n  maxValuesPerFacet?: number;\n  facetingAfterDistinct?: boolean;\n  sortFacetValuesBy?: string;\n\n  // Highlighting / Snippeting\n  attributesToHighlight?: string[];\n  attributesToSnippet?: string[];\n  highlightPreTag?: string;\n  highlightPostTag?: string;\n  snippetEllipsisText?: string;\n  restrictHighlightAndSnippetArrays?: boolean;\n\n  // Pagination\n  page?: number;\n  hitsPerPage?: number;\n  offset?: number;\n  length?: number;\n\n  // Typos\n  minWordSizefor1Typo?: number;\n  minWordSizefor2Typos?: number;\n  typoTolerance?: string | boolean;\n  allowTyposOnNumericTokens?: boolean;\n  ignorePlurals?: boolean | string[];\n  disableTypoToleranceOnAttributes?: string[];\n\n  // Geo-Search\n  aroundLatLng?: string;\n  aroundLatLngViaIP?: boolean;\n  aroundRadius?: number | 'all';\n  aroundPrecision?: number;\n  minimumAroundRadius?: number;\n  insideBoundingBox?: GeoRectangle | GeoRectangle[];\n  insidePolygon?: GeoPolygon | GeoPolygon[];\n\n  // Query Strategy\n  queryType?: string;\n  removeWordsIfNoResults?: string;\n  advancedSyntax?: boolean;\n  optionalWords?: string | string[];\n  removeStopWords?: boolean | string[];\n  disableExactOnAttributes?: string[];\n  exactOnSingleWordQuery?: string;\n  alternativesAsExact?: string[];\n\n  // Query Rules\n  enableRules?: boolean;\n  ruleContexts?: string[];\n\n  // Advanced\n  minProximity?: number;\n  responseFields?: string[];\n  maxFacetHits?: number;\n  percentileComputation?: boolean;\n  distinct?: number | boolean;\n  getRankingInfo?: boolean;\n  clickAnalytics?: boolean;\n  analytics?: boolean;\n  analyticsTags?: string[];\n  synonyms?: boolean;\n  replaceSynonymsInHighlight?: boolean;\n};\n\nexport interface SearchRequestParameters extends SearchParameters {\n  query: string;\n}\n\nexport interface SearchForFacetValuesRequestParameters\n  extends SearchParameters {\n  facetQuery: string;\n  facetName: string;\n}\n\nexport type GeoRectangle = [number, number, number, number];\nexport type GeoPolygon = [number, number, number, number, number, number];\n\n// Documentation: https://www.algolia.com/doc/rest-api/search/?language=javascript#search-multiple-indexes\nexport type SearchResponse = {\n  hits: Hit[];\n  page?: number;\n  nbHits?: number;\n  nbPages?: number;\n  hitsPerPage?: number;\n  processingTimeMS?: number;\n  query?: string;\n  params?: string;\n  index?: string;\n};\n\nexport type Hit = {\n  _highlightResult?: object;\n};\n\n// Documentation: https://www.algolia.com/doc/rest-api/search/?language=javascript#search-for-facet-values\nexport type SearchForFacetValuesResponse = {\n  value: string;\n  highlighted?: string;\n  count?: number;\n};\n\nexport type SearchClient = {\n  addAlgoliaAgent?: (agent: string) => void;\n  search: (requests: SearchRequest[]) => Promise<{ results: SearchResponse[] }>;\n  searchForFacetValues?: (\n    requests: SearchForFacetValuesRequest[]\n  ) => Promise<{ facetHits: SearchForFacetValuesResponse[] }[]>;\n};\n\nexport type InstantSearchConfig = {\n  appId?: string;\n  apiKey?: string;\n  indexName: string;\n\n  numberLocale?: string;\n  searchFunction?: (helper: AlgoliaSearchHelper) => void;\n  createAlgoliaClient?: (\n    algoliasearch: Function,\n    appId: string,\n    apiKey: string\n  ) => object;\n  searchClient?: SearchClient;\n  searchParameters?: SearchParameters | void;\n  urlSync?:\n    | boolean\n    | {\n        mapping?: object;\n        threshold?: number;\n        trackedParameters?: string[];\n        useHash?: boolean;\n        getHistoryState?: () => object;\n      };\n  routing?:\n    | boolean\n    | {\n        router?: {\n          onUpdate: (cb: (object) => void) => void;\n          read: () => object;\n          write: (routeState: object) => void;\n          createURL: (routeState: object) => string;\n          dispose: () => void;\n        };\n        stateMapping?: {\n          stateToRoute(object): object;\n          routeToState(object): object;\n        };\n      };\n};\n\nexport class InstantSearchInstance {\n  public start: () => void;\n\n  public addWidget: (widget: Widget) => void;\n  public addWidgets: (widgets: Widget[]) => void;\n\n  public removeWidget: (widget: Widget) => void;\n  public removeWidgets: (widgets: Widget[]) => void;\n\n  // EventEmmiter\n  public on: (eventName: string, callback: Function) => void;\n  public removeListener: (eventName: string, callback: Function) => void;\n\n  public helper: {\n    lastResults: Object;\n    state: Object;\n  };\n\n  public refresh: () => void;\n  public dispose: () => void;\n}\n\n@Component({\n  selector: 'ais-instantsearch',\n  template: `<ng-content></ng-content>`,\n})\nexport class NgAisInstantSearch implements AfterViewInit, OnInit, OnDestroy {\n  @Input() public config: InstantSearchConfig;\n  @Input() public instanceName: string = 'default';\n\n  @Output()\n  change: EventEmitter<{ results: {}; state: {} }> = new EventEmitter<{\n    results: {};\n    state: {};\n  }>();\n\n  public instantSearchInstance: InstantSearchInstance;\n\n  constructor(@Inject(PLATFORM_ID) private platformId: Object) {}\n\n  public ngOnInit() {\n    this.createInstantSearchInstance(this.config);\n  }\n\n  public ngAfterViewInit() {\n    this.instantSearchInstance.start();\n  }\n\n  public ngOnDestroy() {\n    this.instantSearchInstance.removeListener('render', this.onRender);\n    this.instantSearchInstance.dispose();\n  }\n\n  public createInstantSearchInstance(config: InstantSearchConfig) {\n    // add default searchParameters with highlighting config\n    if (!config.searchParameters) config.searchParameters = {};\n    Object.assign(config.searchParameters, {\n      highlightPreTag: '__ais-highlight__',\n      highlightPostTag: '__/ais-highlight__',\n    });\n\n    // remove URLSync widget if on SSR\n    if (!isPlatformBrowser(this.platformId)) {\n      if (typeof config.urlSync !== 'undefined') delete config.urlSync;\n      if (typeof config.routing !== 'undefined') delete config.routing;\n    }\n\n    if (!config.searchClient && !config.createAlgoliaClient) {\n      const client = algoliasearch(config.appId, config.apiKey);\n      config.searchClient = client;\n      config.appId = undefined;\n      config.apiKey = undefined;\n    }\n\n    // custom algolia client agent\n    if (typeof config.searchClient.addAlgoliaAgent === 'function') {\n      // add user agents\n      config.searchClient.addAlgoliaAgent(`angular (${AngularVersion.full})`);\n      config.searchClient.addAlgoliaAgent(`angular-instantsearch (${VERSION})`);\n    }\n    this.instantSearchInstance = instantsearch(config);\n    this.instantSearchInstance.on('render', this.onRender);\n  }\n\n  public addWidget(widget: Widget) {\n    this.instantSearchInstance.addWidget(widget);\n  }\n\n  public removeWidget(widget: Widget) {\n    this.instantSearchInstance.removeWidget(widget);\n  }\n\n  public refresh() {\n    this.instantSearchInstance.refresh();\n  }\n\n  onRender = () => {\n    this.change.emit({\n      results: this.instantSearchInstance.helper.lastResults,\n      state: this.instantSearchInstance.helper.state,\n    });\n  };\n}\n","import { Component, Input, Inject, forwardRef } from '@angular/core';\nimport { connectBreadcrumb } from 'instantsearch.js/es/connectors';\nimport { BaseWidget } from '../base-widget';\nimport { NgAisInstantSearch } from '../instantsearch/instantsearch';\nimport { noop } from '../utils';\n\nexport type BreadcrumbState = {\n  createURL: Function;\n  items: BreadcrumbItem[];\n  refine: Function;\n};\n\nexport type BreadcrumbItem = {\n  name: string;\n  value: string;\n};\n\n@Component({\n  selector: 'ais-breadcrumb',\n  template: `\n    <div\n      [class]=\"cx()\"\n      *ngIf=\"!isHidden\"\n    >\n      <ul [class]=\"cx('list')\">\n        <li\n          *ngFor=\"let item of items\"\n          [class]=\"cx('item', item.isLast ? 'selected' : undefined)\"\n          (click)=\"handleClick($event, item)\"\n        >\n          <span\n            *ngIf=\"item.separator\"\n            [class]=\"cx('separator')\"\n            aria-hidden=\"true\"\n          >\n            >\n          </span>\n          <a\n            [class]=\"cx('link')\"\n            href=\"{{state.createURL(item.value)}}\"\n            *ngIf=\"!item.isLast\"\n            (click)=\"handleClick($event, item)\"\n          >\n            {{item.name}}\n          </a>\n\n          <span *ngIf=\"item.isLast\">\n            {{item.name}}\n          </span>\n        </li>\n      </ul>\n    </div>\n  `,\n})\nexport class NgAisBreadcrumb extends BaseWidget {\n  // connector options\n  @Input() public attributes: string[];\n  @Input() public rootPath?: string;\n\n  get isHidden() {\n    return this.state.items.length === 0 && this.autoHideContainer;\n  }\n\n  get items() {\n    return this.state.items.map((item, idx) => ({\n      ...item,\n      separator: idx !== 0,\n      isLast: idx === this.state.items.length - 1,\n    }));\n  }\n\n  public state: BreadcrumbState = {\n    createURL: noop,\n    items: [],\n    refine: noop,\n  };\n\n  constructor(\n    @Inject(forwardRef(() => NgAisInstantSearch))\n    public instantSearchParent: any\n  ) {\n    super('Breadcrumb');\n  }\n\n  public ngOnInit() {\n    this.createWidget(connectBreadcrumb, {\n      attributes: this.attributes,\n      rootPath: this.rootPath,\n    });\n\n    super.ngOnInit();\n  }\n\n  public handleClick(event: MouseEvent, item: BreadcrumbItem) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (item.value) {\n      this.state.refine(item.value);\n    }\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { NgAisBreadcrumb } from './breadcrumb';\n\n@NgModule({\n  declarations: [NgAisBreadcrumb],\n  entryComponents: [NgAisBreadcrumb],\n  exports: [NgAisBreadcrumb],\n  imports: [CommonModule],\n})\nexport class NgAisBreadcrumbModule {}\n","import { Component, Input, Inject, forwardRef } from '@angular/core';\nimport { connectClearAll } from 'instantsearch.js/es/connectors';\nimport { BaseWidget } from '../base-widget';\nimport { NgAisInstantSearch } from '../instantsearch/instantsearch';\nimport { noop } from '../utils';\n\n@Component({\n  selector: 'ais-clear-refinements',\n  template: `\n    <div\n      [class]=\"cx()\"\n      *ngIf=\"!isHidden\"\n    >\n      <button\n        [class]=\"cx('button') + (!state.hasRefinements ? (' ' + cx('button', 'disabled')) : '')\"\n        (click)=\"handleClick($event)\"\n        [disabled]=\"!state.hasRefinements\"\n      >\n        {{buttonLabel}}\n      </button>\n    </div>\n  `,\n})\nexport class NgAisClearRefinements extends BaseWidget {\n  @Input() public buttonLabel: string = 'Clear refinements';\n  @Input() public clearsQuery: boolean = false;\n  @Input() public excludeAttributes: string[] = [];\n\n  public state = {\n    hasRefinements: false,\n    refine: noop,\n  };\n\n  get isHidden() {\n    return !this.state.hasRefinements && this.autoHideContainer;\n  }\n\n  constructor(\n    @Inject(forwardRef(() => NgAisInstantSearch))\n    public instantSearchParent: any\n  ) {\n    super('ClearRefinements');\n  }\n\n  public ngOnInit() {\n    // we need to `createWidget` from `ngOnInit` to have `@Input()` intialized\n    this.createWidget(connectClearAll, {\n      clearsQuery: this.clearsQuery,\n      excludeAttributes: this.excludeAttributes,\n    });\n\n    super.ngOnInit();\n  }\n\n  public handleClick(event: MouseEvent) {\n    event.preventDefault();\n\n    if (this.state.hasRefinements) {\n      this.state.refine();\n    }\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { NgAisClearRefinements } from './clear-refinements';\n\n@NgModule({\n  declarations: [NgAisClearRefinements],\n  entryComponents: [NgAisClearRefinements],\n  exports: [NgAisClearRefinements],\n  imports: [CommonModule],\n})\nexport class NgAisClearRefinementsModule {}\n","import { Component, Input, Inject, forwardRef } from '@angular/core';\n\nimport { connectCurrentRefinedValues } from 'instantsearch.js/es/connectors';\nimport { BaseWidget } from '../base-widget';\nimport { NgAisInstantSearch } from '../instantsearch/instantsearch';\nimport { noop, capitalize } from '../utils';\n\nexport type CurrentRefinementsState = {\n  attributes: {};\n  clearAllClick: Function;\n  clearAllURL: Function;\n  createURL: Function;\n  refine: Function;\n  refinements: {}[];\n};\n\n@Component({\n  selector: 'ais-current-refinements',\n  template: `\n    <div\n      [class]=\"cx()\"\n      *ngIf=\"!isHidden\"\n    >\n      <button\n        [class]=\"cx('reset')\"\n        (click)=\"handleClearAllClick($event)\"\n        *ngIf=\"clearRefinements === 'before' || clearRefinements === true\">\n        {{clearRefinementsLabel}}\n      </button>\n\n      <ul\n        [class]=\"cx('list')\"\n        *ngFor=\"let refinement of refinements\"\n      >\n        <li [class]=\"cx('item')\">\n          <span [class]=\"cx('label')\">{{refinement.label}}:</span>\n\n          <span\n            [class]=\"cx('category')\"\n            *ngFor=\"let item of refinement.items\"\n          >\n            <span [class]=\"cx('categoryLabel')\">{{item.name}}</span>\n            <button [class]=\"cx('delete')\" (click)=\"handleClick($event, item)\">â</button>\n          </span>\n        </li>\n      </ul>\n\n      <button\n        [class]=\"cx('reset')\"\n        (click)=\"handleClearAllClick($event)\"\n        *ngIf=\"clearRefinements === 'after'\">\n        {{clearRefinementsLabel}}\n      </button>\n    </div>\n  `,\n})\nexport class NgAisCurrentRefinements extends BaseWidget {\n  // render options\n  @Input() public clearRefinements: 'before' | 'after' | boolean = 'after';\n  @Input() public clearRefinementsLabel: string = 'Clear refinements';\n  @Input() public transformItems?: Function;\n\n  // connector options\n  @Input() public onlyListedAttributes: boolean = false;\n  @Input() public clearsQuery: boolean = false;\n  @Input()\n  public attributes: {\n    name: string;\n    label: string;\n  }[] = [];\n\n  public state: CurrentRefinementsState = {\n    attributes: {},\n    clearAllClick: noop,\n    clearAllURL: noop,\n    createURL: noop,\n    refine: noop,\n    refinements: [],\n  };\n\n  get isHidden() {\n    return this.state.refinements.length === 0 && this.autoHideContainer;\n  }\n\n  get refinements() {\n    const items =\n      typeof this.transformItems === 'function'\n        ? this.transformItems(this.state.refinements)\n        : this.state.refinements;\n\n    // group refinements by category? (attributeName && type)\n    return items.reduce((res, { type, attributeName, ...refinement }) => {\n      const match = res.find(\n        r => r.attributeName === attributeName && r.type === type\n      );\n      if (match) {\n        match.items.push({ type, attributeName, ...refinement });\n      } else {\n        res.push({\n          type,\n          attributeName,\n          label: capitalize(attributeName),\n          items: [{ type, attributeName, ...refinement }],\n        });\n      }\n      return res;\n    }, []);\n  }\n\n  get json() {\n    return JSON.stringify(this.refinements, null, 4);\n  }\n\n  constructor(\n    @Inject(forwardRef(() => NgAisInstantSearch))\n    public instantSearchParent: any\n  ) {\n    super('CurrentRefinements');\n  }\n\n  public ngOnInit() {\n    this.createWidget(connectCurrentRefinedValues, {\n      attributes: this.attributes,\n      clearsQuery: this.clearsQuery,\n      onlyListedAttributes: this.onlyListedAttributes,\n    });\n    super.ngOnInit();\n  }\n\n  public handleClick(event: MouseEvent, refinement: {}) {\n    event.preventDefault();\n    this.state.refine(refinement);\n  }\n\n  public handleClearAllClick(event: MouseEvent) {\n    event.preventDefault();\n    this.state.clearAllClick();\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { NgAisCurrentRefinements } from './current-refinements';\n\n@NgModule({\n  declarations: [NgAisCurrentRefinements],\n  entryComponents: [NgAisCurrentRefinements],\n  exports: [NgAisCurrentRefinements],\n  imports: [CommonModule],\n})\nexport class NgAisCurrentRefinementsModule {}\n","import { Component, Input, Inject, forwardRef } from '@angular/core';\n\nimport { connectHierarchicalMenu } from 'instantsearch.js/es/connectors';\nimport { BaseWidget } from '../base-widget';\nimport { NgAisInstantSearch } from '../instantsearch/instantsearch';\nimport { parseNumberInput, noop } from '../utils';\n\nexport type HierarchicalMenuState = {\n  createURL: Function;\n  items: {}[];\n  refine: Function;\n};\n\n@Component({\n  selector: 'ais-hierarchical-menu',\n  template: `\n    <div\n      [class]=\"cx()\"\n      *ngIf=\"!isHidden\"\n    >\n      <ul [class]=\"cx('list') + ' ' + cx('list', 'lvl0')\">\n        <ais-hierarchical-menu-item\n          *ngFor=\"let item of items\"\n          [item]=\"item\"\n          [createURL]=\"state.createURL\"\n          [refine]=\"state.refine\"\n        >\n        </ais-hierarchical-menu-item>\n      </ul>\n    </div>\n  `,\n})\nexport class NgAisHierarchicalMenu extends BaseWidget {\n  // render option\n  @Input() public transformItems?: Function;\n\n  // connector options\n  @Input() public attributes: string[];\n  @Input() public separator?: string = ' > ';\n  @Input() public rootPath?: string;\n  @Input() public showParentLevel?: boolean;\n  @Input() public limit?: number | string = 10;\n  @Input() public sortBy?: string[] | ((item: object) => number);\n\n  public state: HierarchicalMenuState = {\n    createURL: noop,\n    items: [],\n    refine: noop,\n  };\n\n  get isHidden() {\n    return this.state.items.length === 0 && this.autoHideContainer;\n  }\n\n  get items() {\n    return typeof this.transformItems === 'function'\n      ? this.transformItems(this.state.items)\n      : this.state.items;\n  }\n\n  constructor(\n    @Inject(forwardRef(() => NgAisInstantSearch))\n    public instantSearchParent: any\n  ) {\n    super('HierarchicalMenu');\n  }\n\n  public ngOnInit() {\n    this.createWidget(connectHierarchicalMenu, {\n      limit: parseNumberInput(this.limit),\n      attributes: this.attributes,\n      rootPath: this.rootPath,\n      separator: this.separator,\n      showParentLevel: this.showParentLevel,\n      sortBy: this.sortBy,\n    });\n\n    super.ngOnInit();\n  }\n}\n","import { Component, Input } from '@angular/core';\nimport { bem } from '../utils';\n\nexport type HierarchicalMenuItem = {\n  value: string;\n  label: string;\n  count: number;\n  isRefined: boolean;\n  data: HierarchicalMenuItem[];\n};\n\n@Component({\n  selector: 'ais-hierarchical-menu-item',\n  template: `\n    <li\n      [class]=\"getItemClass(item)\"\n      (click)=\"handleClick($event, item)\"\n    >\n      <a\n        [class]=\"cx('link')\"\n        href=\"{{createURL(item.value)}}\"\n        (click)=\"handleClick($event, item)\"\n      >\n        <span [class]=\"cx('label')\">{{item.label}}</span>\n        <span [class]=\"cx('count')\">{{item.count}}</span>\n      </a>\n\n      <ul\n        [class]=\"getListClass(item)\"\n        *ngIf=\"item.isRefined && isArray(item.data) && item.data.length > 0\"\n      >\n        <ais-hierarchical-menu-item\n          *ngFor=\"let child of item.data\"\n          [item]=\"child\"\n          [createURL]=\"createURL\"\n          [refine]=\"refine\"\n          [lvl]=\"lvl + 1\"\n        >\n        </ais-hierarchical-menu-item>\n      </ul>\n    </li>\n  `,\n})\nexport class NgAisHierarchicalMenuItem {\n  @Input() public lvl: number = 1;\n  @Input() public refine: (string) => void;\n  @Input() public createURL: (string) => string;\n  @Input() public item: HierarchicalMenuItem;\n\n  public cx = bem('HierarchicalMenu');\n\n  public getItemClass(item) {\n    let className = this.cx('item');\n\n    if (item.isRefined) {\n      className = `${className} ${this.cx('item', 'selected')}`;\n    }\n\n    if (this.isArray(item.data) && item.data.length > 0) {\n      className = `${className} ${this.cx('item', 'parent')}`;\n    }\n\n    return className;\n  }\n\n  public getListClass(item) {\n    return `${this.cx('list')} ${this.cx('list', 'child')} ${this.cx(\n      'list',\n      `lvl${this.lvl}`\n    )}`;\n  }\n\n  public isArray(potentialArray: any) {\n    return Array.isArray(potentialArray);\n  }\n\n  public handleClick(event: MouseEvent, item: HierarchicalMenuItem) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    this.refine(item.value);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { NgAisHierarchicalMenu } from './hierarchical-menu';\nimport { NgAisHierarchicalMenuItem } from './hierarchical-menu-item';\n\n@NgModule({\n  declarations: [NgAisHierarchicalMenu, NgAisHierarchicalMenuItem],\n  entryComponents: [NgAisHierarchicalMenu],\n  exports: [NgAisHierarchicalMenu],\n  imports: [CommonModule],\n})\nexport class NgAisHierarchicalMenuModule {}\n","import { Component, Input, Inject, forwardRef } from '@angular/core';\n\nimport { connectHitsPerPage } from 'instantsearch.js/es/connectors';\nimport { BaseWidget } from '../base-widget';\nimport { NgAisInstantSearch } from '../instantsearch/instantsearch';\nimport { noop } from '../utils';\n\nexport type ResultsPerPageState = {\n  items: {}[];\n  refine: Function;\n};\n\n@Component({\n  selector: 'ais-hits-per-page',\n  template: `\n    <div\n      [class]=\"cx()\"\n      *ngIf=\"!isHidden\"\n    >\n      <select\n        [class]=\"cx('select')\"\n        (change)=\"state.refine($event.target.value)\"\n      >\n        <option\n          [class]=\"cx('option')\"\n          *ngFor=\"let item of state.items\"\n          [value]=\"item.value\"\n          [selected]=\"item.isRefined\"\n        >\n          {{item.label}}\n        </option>\n      </select>\n    </div>\n  `,\n})\nexport class NgAisHitsPerPage extends BaseWidget {\n  @Input()\n  public items: {\n    value: number;\n    label: string;\n    default?: boolean;\n  }[];\n\n  public state: ResultsPerPageState = {\n    items: [],\n    refine: noop,\n  };\n\n  get isHidden() {\n    return this.state.items.length === 0 && this.autoHideContainer;\n  }\n\n  constructor(\n    @Inject(forwardRef(() => NgAisInstantSearch))\n    public instantSearchParent: any\n  ) {\n    super('HitsPerPage');\n  }\n\n  public ngOnInit() {\n    this.createWidget(connectHitsPerPage, { items: this.items });\n    super.ngOnInit();\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { NgAisHitsPerPage } from './hits-per-page';\n\n@NgModule({\n  declarations: [NgAisHitsPerPage],\n  entryComponents: [NgAisHitsPerPage],\n  exports: [NgAisHitsPerPage],\n  imports: [CommonModule],\n})\nexport class NgAisHitsPerPageModule {}\n","const get = require('lodash/get');\nimport { Component, Input } from '@angular/core';\nimport { bem } from '../utils';\n\n@Component({\n  selector: 'ais-highlight',\n  template: `<span [class]=\"cx()\" [innerHtml]=\"content\"></span>`,\n})\nexport class NgAisHighlight {\n  @Input() attribute: string;\n  @Input() hit: { _highlightResult?: {}; label?: string; highlighted?: string };\n  @Input() tagName: string = 'em';\n\n  cx = bem('Highlight');\n\n  get content() {\n    if (this.attribute === 'highlighted') {\n      return this.hit.highlighted\n        ? this.replaceWithTagName(this.hit.highlighted)\n        : this.hit.label;\n    }\n\n    if (this.hit.hasOwnProperty('_highlightResult')) {\n      const attributeHighlighted = get(\n        this.hit._highlightResult,\n        this.attribute\n      );\n\n      // check that the attributeHighlighted is a string\n      if (\n        attributeHighlighted !== undefined &&\n        typeof attributeHighlighted.value === 'string'\n      ) {\n        return this.replaceWithTagName(attributeHighlighted.value);\n      }\n    }\n\n    const fallback = get(this.hit, this.attribute);\n    if (!fallback) {\n      console.warn(\n        `Could not find attribute [${\n          this.attribute\n        }] into hit object, will display an empty string.`\n      );\n\n      return '';\n    }\n\n    return fallback;\n  }\n\n  replaceWithTagName(value: string) {\n    return value\n      .replace(\n        new RegExp('<em>', 'g'),\n        `<${this.tagName} class=\"${this.cx('highlighted')}\">`\n      )\n      .replace(new RegExp('</em>', 'g'), `</${this.tagName}>`);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { NgAisHighlight } from './highlight';\n\n@NgModule({\n  declarations: [NgAisHighlight],\n  entryComponents: [NgAisHighlight],\n  exports: [NgAisHighlight],\n  imports: [CommonModule],\n})\nexport class NgAisHighlightModule {}\n","import {\n  Inject,\n  Input,\n  Component,\n  ContentChild,\n  TemplateRef,\n  forwardRef,\n} from '@angular/core';\n\nimport { connectHits } from 'instantsearch.js/es/connectors';\nimport { BaseWidget } from '../base-widget';\nimport { NgAisInstantSearch } from '../instantsearch/instantsearch';\n\n@Component({\n  selector: 'ais-hits',\n  template: `\n    <div [class]=\"cx()\">\n      <ng-container *ngTemplateOutlet=\"template; context: state\"></ng-container>\n\n      <!-- default rendering if no template specified -->\n      <div *ngIf=\"!template\">\n        <ul [class]=\"cx('list')\">\n          <li\n            [class]=\"cx('item')\"\n            *ngFor=\"let hit of state.hits\"\n          >\n            <ais-highlight attribute=\"name\" [hit]=\"hit\">\n            </ais-highlight>\n          </li>\n        </ul>\n      </div>\n    </div>\n  `,\n})\nexport class NgAisHits extends BaseWidget {\n  @ContentChild(TemplateRef) public template?: TemplateRef<any>;\n\n  // render options\n  @Input() transformItems?: Function;\n\n  // inner widget state returned from connector\n  public state: { hits: {}[]; results: {} } = { hits: [], results: {} };\n\n  constructor(\n    @Inject(forwardRef(() => NgAisInstantSearch))\n    public instantSearchParent: any\n  ) {\n    super('Hits');\n    this.createWidget(connectHits, { escapeHits: true });\n  }\n\n  updateState = (state, isFirstRendering: boolean) => {\n    if (isFirstRendering) return;\n\n    this.state = {\n      ...state,\n      results: state.results,\n      hits:\n        typeof this.transformItems === 'function'\n          ? this.transformItems(state.hits)\n          : state.hits,\n    };\n  };\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { NgAisHighlightModule } from '../highlight/highlight.module';\nimport { NgAisHits } from './hits';\n\n@NgModule({\n  declarations: [NgAisHits],\n  entryComponents: [NgAisHits],\n  exports: [NgAisHits],\n  imports: [CommonModule, NgAisHighlightModule],\n})\nexport class NgAisHitsModule {}\n","import {\n  Component,\n  ContentChild,\n  Input,\n  TemplateRef,\n  Inject,\n  forwardRef,\n} from '@angular/core';\n\nimport { connectInfiniteHits } from 'instantsearch.js/es/connectors';\nimport { BaseWidget } from '../base-widget';\nimport { NgAisInstantSearch } from '../instantsearch/instantsearch';\nimport { noop } from '../utils';\n\n@Component({\n  selector: 'ais-infinite-hits',\n  template: `\n    <div [class]=\"cx()\">\n      <ng-container *ngTemplateOutlet=\"template; context: state\"></ng-container>\n\n      <!-- default rendering if no template specified -->\n      <div *ngIf=\"!template\">\n        <ul [class]=\"cx('list')\">\n          <li\n            [class]=\"cx('item')\"\n            *ngFor=\"let hit of state.hits\"\n          >\n            <ais-highlight attribute=\"name\" [hit]=\"hit\">\n            </ais-highlight>\n          </li>\n        </ul>\n      </div>\n\n      <button\n        [class]=\"cx('showMore')\"\n        (click)=\"showMore($event)\"\n        [disabled]=\"state.isLastPage\"\n        *ngIf=\"!template\"\n      >\n        {{showMoreLabel}}\n      </button>\n    </div>\n  `,\n})\nexport class NgAisInfiniteHits extends BaseWidget {\n  @ContentChild(TemplateRef) public template?: any;\n\n  // render options\n  @Input() public showMoreLabel: string = 'Show more results';\n  @Input() public transformItems?: Function;\n\n  // inner widget state returned from connector\n  public state: {\n    hits: {}[];\n    isLastPage: boolean;\n    showMore: Function;\n    results: {};\n  } = {\n    hits: [],\n    isLastPage: false,\n    showMore: noop,\n    results: {},\n  };\n\n  constructor(\n    @Inject(forwardRef(() => NgAisInstantSearch))\n    public instantSearchParent: any\n  ) {\n    super('InfiniteHits');\n    this.createWidget(connectInfiniteHits, { escapeHits: true });\n  }\n\n  public showMore(event: MouseEvent) {\n    event.preventDefault();\n    this.state.showMore();\n  }\n\n  updateState = (state, isFirstRendering: boolean) => {\n    if (isFirstRendering) return;\n\n    this.state = {\n      ...state,\n      results: state.results,\n      hits:\n        typeof this.transformItems === 'function'\n          ? this.transformItems(state.hits)\n          : state.hits,\n    };\n  };\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { NgAisHighlightModule } from '../highlight/highlight.module';\nimport { NgAisInfiniteHits } from './infinite-hits';\n\n@NgModule({\n  declarations: [NgAisInfiniteHits],\n  entryComponents: [NgAisInfiniteHits],\n  exports: [NgAisInfiniteHits],\n  imports: [CommonModule, NgAisHighlightModule],\n})\nexport class NgAisInfiniteHitsModule {}\n","import { CommonModule } from '@angular/common';\nimport { ModuleWithProviders, NgModule } from '@angular/core';\n\nimport { NgAisInstantSearch } from './instantsearch';\n\n@NgModule({\n  declarations: [NgAisInstantSearch],\n  entryComponents: [NgAisInstantSearch],\n  exports: [NgAisInstantSearch],\n  imports: [CommonModule],\n})\nexport class NgAisInstantSearchModule {\n  public static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: NgAisInstantSearchModule,\n      providers: [],\n    };\n  }\n}\n","import { Component, Input, Inject, forwardRef } from '@angular/core';\n\nimport { connectMenu } from 'instantsearch.js/es/connectors';\nimport { BaseWidget } from '../base-widget';\nimport { NgAisInstantSearch } from '../instantsearch/instantsearch';\nimport { parseNumberInput, noop } from '../utils';\n\nexport type MenuState = {\n  canRefine: boolean;\n  canToggleShowMore: boolean;\n  createURL: Function;\n  isShowingMore: boolean;\n  items: {}[];\n  refine: Function;\n  toggleShowMore: Function;\n};\n\n@Component({\n  selector: 'ais-menu',\n  template: `\n    <div\n      [class]=\"cx()\"\n      *ngIf=\"!isHidden\"\n    >\n      <ul [class]=\"cx('list')\">\n        <li\n          [class]=\"getItemClass(item)\"\n          *ngFor=\"let item of items\"\n          (click)=\"handleClick($event, item.value)\"\n        >\n          <a\n            href=\"{{state.createURL(item.value)}}\"\n            [class]=\"cx('link')\"\n            (click)=\"handleClick($event, item.value)\"\n          >\n            <span [class]=\"cx('label')\">{{item.label}}</span>\n            <span [class]=\"cx('count')\">{{item.count}}</span>\n          </a>\n        </li>\n      </ul>\n\n      <button\n        *ngIf=\"showMoreLimit && state.canToggleShowMore\"\n        (click)=\"state.toggleShowMore()\"\n        [class]=\"showMoreClass\"\n      >\n        {{state.isShowingMore ? showLessLabel : showMoreLabel}}\n      </button>\n    </div>\n  `,\n})\nexport class NgAisMenu extends BaseWidget {\n  // render options\n  @Input() public showMoreLabel: string = 'Show more';\n  @Input() public showLessLabel: string = 'Show less';\n  @Input() public transformItems?: Function;\n\n  // connector options\n  @Input() public attribute: string;\n  @Input() public limit?: number | string = 10;\n  @Input() public showMoreLimit?: number | string;\n  @Input() public sortBy?: string[] | ((item: object) => number);\n\n  public state: MenuState = {\n    canRefine: false,\n    canToggleShowMore: false,\n    createURL: noop,\n    isShowingMore: false,\n    items: [],\n    refine: noop,\n    toggleShowMore: noop,\n  };\n\n  get isHidden() {\n    return this.state.items.length === 0 && this.autoHideContainer;\n  }\n\n  get showMoreClass() {\n    let className = this.cx('showMore');\n\n    if (!this.state.canToggleShowMore) {\n      className = `${className} ${this.cx('showMore', 'disabled')}`;\n    }\n\n    return className;\n  }\n\n  get items() {\n    return typeof this.transformItems === 'function'\n      ? this.transformItems(this.state.items)\n      : this.state.items;\n  }\n\n  constructor(\n    @Inject(forwardRef(() => NgAisInstantSearch))\n    public instantSearchParent: any\n  ) {\n    super('Menu');\n  }\n\n  public ngOnInit() {\n    this.createWidget(connectMenu, {\n      limit: parseNumberInput(this.limit),\n      showMoreLimit: parseNumberInput(this.showMoreLimit),\n      attributeName: this.attribute,\n      sortBy: this.sortBy,\n    });\n\n    super.ngOnInit();\n  }\n\n  handleClick(event: MouseEvent, value: string) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    this.state.refine(value);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { NgAisMenu } from './menu';\n\n@NgModule({\n  declarations: [NgAisMenu],\n  entryComponents: [NgAisMenu],\n  exports: [NgAisMenu],\n  imports: [CommonModule],\n})\nexport class NgAisMenuModule {}\n","import { Component, Input, Inject, forwardRef } from '@angular/core';\n\nimport { connectNumericRefinementList } from 'instantsearch.js/es/connectors';\nimport { BaseWidget } from '../base-widget';\nimport { NgAisInstantSearch } from '../instantsearch/instantsearch';\nimport { noop } from '../utils';\n\nexport type NumericRefinementListState = {\n  createURL: Function;\n  items: {}[];\n  refine: Function;\n};\n\n@Component({\n  selector: 'ais-numeric-menu',\n  template: `\n    <div\n      [class]=\"cx()\"\n      *ngIf=\"!isHidden\"\n    >\n      <ul [class]=\"cx('list')\">\n        <li\n          [class]=\"getItemClass(item)\"\n          *ngFor=\"let item of state.items\"\n          (click)=\"refine($event, item)\"\n        >\n          <label [class]=\"cx('label')\">\n            <input\n              [class]=\"cx('radio')\"\n              type=\"radio\"\n              name=\"NumericMenu\"\n              [checked]=\"item.isRefined\"\n            />\n            <span [class]=\"cx('labelText')\">{{item.label}}</span>\n          </label>\n        </li>\n      </ul>\n    </div>\n  `,\n})\nexport class NgAisNumericMenu extends BaseWidget {\n  @Input() public attribute: string;\n  @Input()\n  public items: {\n    name: string;\n    start?: number;\n    end?: number;\n  }[];\n\n  public state: NumericRefinementListState = {\n    createURL: noop,\n    items: [],\n    refine: noop,\n  };\n\n  get isHidden() {\n    return this.state.items.length === 0 && this.autoHideContainer;\n  }\n\n  constructor(\n    @Inject(forwardRef(() => NgAisInstantSearch))\n    public instantSearchParent: any\n  ) {\n    super('NumericMenu');\n  }\n\n  public ngOnInit() {\n    this.createWidget(connectNumericRefinementList, {\n      attributeName: this.attribute,\n      options: this.items,\n    });\n    super.ngOnInit();\n  }\n\n  public refine(event: MouseEvent, item: { value: string }) {\n    event.preventDefault();\n    event.stopPropagation();\n    this.state.refine(item.value);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { NgAisNumericMenu } from './numeric-menu';\n\n@NgModule({\n  declarations: [NgAisNumericMenu],\n  entryComponents: [NgAisNumericMenu],\n  exports: [NgAisNumericMenu],\n  imports: [CommonModule],\n})\nexport class NgAisNumericMenuModule {}\n","import { Component, Input, Inject, forwardRef } from '@angular/core';\n\nimport { connectNumericSelector } from 'instantsearch.js/es/connectors';\nimport { BaseWidget } from '../base-widget';\nimport { NgAisInstantSearch } from '../instantsearch/instantsearch';\nimport { noop } from '../utils';\n\nexport type NumericSelectorState = {\n  currentRefinement?: string | null;\n  options: {}[];\n  refine: Function;\n};\n\n@Component({\n  selector: 'ais-numeric-selector',\n  template: `\n    <div [class]=\"cx('')\">\n      <select\n        [class]=\"cx('select')\"\n        (change)=\"state.refine($event.target.value)\"\n      >\n        <option\n          [class]=\"cx('option')\"\n          *ngFor=\"let item of state.options\"\n          [value]=\"item.value\"\n          [selected]=\"item.value === state.currentRefinement\"\n        >\n          {{item.label}}\n        </option>\n      </select>\n    </div>\n  `,\n})\nexport class NgAisNumericSelector extends BaseWidget {\n  // connector options\n  @Input() public attribute: string;\n  @Input() public operator: '<' | '<=' | '=' | '>=' | '>' | '!=' = '=';\n  @Input()\n  public items: {\n    value: number;\n    label: string;\n  }[];\n\n  public state: NumericSelectorState = {\n    currentRefinement: null,\n    options: [],\n    refine: noop,\n  };\n\n  constructor(\n    @Inject(forwardRef(() => NgAisInstantSearch))\n    public instantSearchParent: any\n  ) {\n    super('NumericSelector');\n  }\n\n  public ngOnInit() {\n    this.createWidget(connectNumericSelector, {\n      attributeName: this.attribute,\n      operator: this.operator,\n      options: this.items,\n    });\n    super.ngOnInit();\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { NgAisNumericSelector } from './numeric-selector';\n\n@NgModule({\n  declarations: [NgAisNumericSelector],\n  entryComponents: [NgAisNumericSelector],\n  exports: [NgAisNumericSelector],\n  imports: [CommonModule],\n})\nexport class NgAisNumericSelectorModule {}\n","const range = require('lodash/range');\nimport { Component, Input, Inject, forwardRef } from '@angular/core';\nimport { connectPagination } from 'instantsearch.js/es/connectors';\nimport { BaseWidget } from '../base-widget';\nimport { NgAisInstantSearch } from '../instantsearch/instantsearch';\nimport { parseNumberInput, noop } from '../utils';\n\n@Component({\n  selector: 'ais-pagination',\n  template: `\n    <div [class]=\"cx()\">\n      <ul [class]=\"cx('list')\">\n        <li\n          *ngIf=\"showFirst\"\n          (click)=\"refine($event, 0)\"\n          [class]=\"\n            cx('item') +\n            ' ' +\n            cx('item', 'firstPage') +\n            (state.currentRefinement === 0 ? ' ' + cx('item', 'disabled') : '')\n          \"\n        >\n          <a\n            [href]=\"state.createURL(0)\"\n            [class]=\"cx('link')\"\n          >\n            â¹â¹\n          </a>\n        </li>\n\n        <li\n          *ngIf=\"showPrevious\"\n          (click)=\"refine($event, state.currentRefinement - 1)\"\n          [class]=\"\n            cx('item') +\n            ' ' +\n            cx('item', 'previousPage') +\n            (state.currentRefinement === 0 ? ' ' + cx('item', 'disabled') : '')\n          \"\n        >\n          <a\n            [href]=\"state.createURL(state.currentRefinement - 1)\"\n            [class]=\"cx('link')\"\n          >\n            â¹\n          </a>\n        </li>\n\n        <li\n          [class]=\"\n            cx('item') +\n            ' ' +\n            cx('item', 'page') +\n            (state.currentRefinement === page ? ' ' + cx('item', 'selected') : '')\n          \"\n          *ngFor=\"let page of pages\"\n          (click)=\"refine($event, page)\"\n        >\n          <a\n            [class]=\"cx('link')\"\n            [href]=\"state.createURL(page)\"\n          >\n            {{page + 1}}\n          </a>\n        </li>\n\n        <li\n          *ngIf=\"showNext\"\n          (click)=\"refine($event, state.currentRefinement + 1)\"\n          [class]=\"\n            cx('item') +\n            ' ' +\n            cx('item', 'nextPage') +\n            (state.currentRefinement + 1 === state.nbPages ? ' ' + cx('item', 'disabled') : '')\n          \"\n        >\n          <a\n            [href]=\"state.createURL(state.currentRefinement + 1)\"\n            [class]=\"cx('link')\"\n          >\n            âº\n          </a>\n        </li>\n\n        <li\n          *ngIf=\"showLast\"\n          (click)=\"refine($event, state.nbPages - 1)\"\n          [class]=\"\n            cx('item') +\n            ' ' +\n            cx('item', 'lastPage') +\n            (state.currentRefinement + 1 === state.nbPages ? ' ' + cx('item', 'disabled') : '')\n          \"\n        >\n          <a\n            [href]=\"state.createURL(state.nbPages - 1)\"\n            [class]=\"cx('link')\"\n          >\n            âºâº\n          </a>\n        </li>\n      </ul>\n    </div>\n  `,\n})\nexport class NgAisPagination extends BaseWidget {\n  // render options\n  @Input() public showFirst: boolean = true;\n  @Input() public showLast: boolean = false;\n  @Input() public showPrevious: boolean = true;\n  @Input() public showNext: boolean = true;\n  @Input() public padding: number | string = 3;\n\n  // connector options\n  @Input() public totalPages?: number | string;\n\n  public state = {\n    createURL: noop,\n    currentRefinement: 0,\n    nbHits: 0,\n    nbPages: 0,\n    refine: noop,\n  };\n\n  get pages() {\n    const { nbPages, currentRefinement } = this.state;\n\n    const pagesArray = Array.apply(null, { length: nbPages }).map(\n      Number.call,\n      Number\n    );\n\n    const pagesPadding =\n      typeof this.padding === 'string'\n        ? parseInt(this.padding, 10)\n        : this.padding;\n\n    if (pagesPadding && pagesPadding > 0) {\n      // should not display pages that does not exists\n      if (nbPages < pagesPadding * 2 + 1) {\n        return pagesArray;\n      }\n\n      const minDelta = currentRefinement - pagesPadding - 1;\n      const maxDelta = currentRefinement + pagesPadding + 1;\n\n      if (minDelta < 0) {\n        return range(0, currentRefinement + pagesPadding + Math.abs(minDelta));\n      }\n\n      if (maxDelta > nbPages) {\n        return range(\n          currentRefinement - pagesPadding - (maxDelta - nbPages),\n          nbPages\n        );\n      }\n\n      return range(\n        currentRefinement - pagesPadding,\n        currentRefinement + pagesPadding + 1\n      );\n    }\n\n    return pagesArray;\n  }\n\n  constructor(\n    @Inject(forwardRef(() => NgAisInstantSearch))\n    public instantSearchParent: any\n  ) {\n    super('Pagination');\n  }\n\n  public ngOnInit() {\n    this.createWidget(connectPagination, {\n      maxPages: parseNumberInput(this.totalPages),\n    });\n    super.ngOnInit();\n  }\n\n  public refine(event: MouseEvent, page: number) {\n    event.stopPropagation();\n    event.preventDefault();\n\n    if (\n      page < 0 ||\n      page === this.state.currentRefinement ||\n      page >= this.state.nbPages\n    ) {\n      return;\n    }\n\n    this.state.refine(page);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { NgAisPagination } from './pagination';\n\n@NgModule({\n  declarations: [NgAisPagination],\n  entryComponents: [NgAisPagination],\n  exports: [NgAisPagination],\n  imports: [CommonModule],\n})\nexport class NgAisPaginationModule {}\n","import { Component, Input, ViewChild, Inject, forwardRef } from '@angular/core';\n\nimport { connectRange } from 'instantsearch.js/es/connectors';\nimport * as noUiSlider from 'nouislider';\n\nimport { BaseWidget } from '../base-widget';\nimport { NgAisInstantSearch } from '../instantsearch/instantsearch';\nimport { parseNumberInput, noop } from '../utils';\n\nexport type RangeSliderState = {\n  range: { min: number; max: number };\n  refine: Function;\n  start: number[];\n};\n\n@Component({\n  selector: 'ais-range-slider',\n  template: `\n    <div [class]=\"cx()\">\n      <div [class]=\"cx('body')\">\n        <div #sliderContainer></div>\n      </div>\n    </div>\n  `,\n})\nexport class NgAisRangeSlider extends BaseWidget {\n  @ViewChild('sliderContainer') public sliderContainer: any;\n\n  // render options\n  @Input() public pips: boolean = true;\n  @Input() public tooltips: boolean = true;\n\n  // connector options\n  @Input() public attribute: string;\n  @Input() public min?: number | string;\n  @Input() public max?: number | string;\n  @Input() public precision: number | string = 2;\n\n  public state: RangeSliderState = {\n    range: { min: 0, max: 1 },\n    refine: noop,\n    start: [0, 1],\n  };\n\n  private slider: any;\n\n  get step() {\n    // compute step from the precision value\n    const precision = parseNumberInput(this.precision) || 2;\n    return 1 / Math.pow(10, precision);\n  }\n\n  constructor(\n    @Inject(forwardRef(() => NgAisInstantSearch))\n    public instantSearchParent: any\n  ) {\n    super('RangeSlider');\n  }\n\n  public ngOnInit() {\n    this.createWidget(connectRange, {\n      attributeName: this.attribute,\n      max: parseNumberInput(this.max),\n      min: parseNumberInput(this.min),\n      precision: parseNumberInput(this.precision),\n    });\n\n    super.ngOnInit();\n  }\n\n  public updateState = (state, isFirstRendering: boolean) => {\n    if (isFirstRendering) {\n      // create slider\n      const config = {\n        animate: false,\n        behaviour: 'snap',\n        connect: true,\n        range: { min: 0, max: 1 },\n        start: [0, 1],\n        step: this.step,\n        tooltips: this.tooltips && [\n          { to: this.formatTooltip },\n          { to: this.formatTooltip },\n        ],\n      };\n\n      if (this.pips === true || typeof this.pips === 'undefined') {\n        Object.assign(config, {\n          pips: {\n            density: 3,\n            mode: 'positions',\n            stepped: true,\n            values: [0, 50, 100],\n          },\n        });\n      } else if (this.pips !== undefined) {\n        Object.assign(config, { pips: this.pips });\n      }\n\n      this.slider = noUiSlider.create(\n        this.sliderContainer.nativeElement,\n        config\n      );\n\n      // register listen events\n      this.sliderContainer.nativeElement.noUiSlider.on(\n        'change',\n        this.handleChange\n      );\n    }\n\n    // update component inner state\n    this.state = state;\n\n    // update the slider state\n    const {\n      range: { min, max },\n      start,\n    } = state;\n\n    const disabled = min === max;\n    const range = disabled ? { min, max: max + 0.0001 } : { min, max };\n\n    this.slider.updateOptions({ disabled, range, start });\n  };\n\n  public handleChange = (values: string[] | number[]) => {\n    this.state.refine(values);\n  };\n\n  public formatTooltip = (value: number) => {\n    return value.toFixed(parseNumberInput(this.precision));\n  };\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { NgAisRangeSlider } from './range-slider';\n\n@NgModule({\n  declarations: [NgAisRangeSlider],\n  entryComponents: [NgAisRangeSlider],\n  exports: [NgAisRangeSlider],\n  imports: [CommonModule],\n})\nexport class NgAisRangeSliderModule {}\n","import { Component, Input, Inject, forwardRef } from '@angular/core';\nimport { connectRefinementList } from 'instantsearch.js/es/connectors';\nimport { BaseWidget } from '../base-widget';\nimport { NgAisInstantSearch } from '../instantsearch/instantsearch';\nimport { parseNumberInput, noop } from '../utils';\n\nexport type RefinementListState = {\n  canRefine: boolean;\n  canToggleShowMore: boolean;\n  createURL: Function;\n  isShowingMore: boolean;\n  items: {}[];\n  refine: Function;\n  toggleShowMore: Function;\n  searchForItems: Function;\n  isFormSearch: boolean;\n};\n\n@Component({\n  selector: 'ais-refinement-list',\n  template: `\n    <div\n      [class]=\"cx()\"\n      *ngIf=\"!isHidden\"\n    >\n      <div\n        *ngIf=\"searchable\"\n        [class]=\"cx('searchBox')\"\n      >\n        <ais-facets-search\n          [search]=\"state.searchForItems\"\n          [searchPlaceholder]=\"searchPlaceholder\"\n        >\n        </ais-facets-search>\n      </div>\n\n      <ul [class]=\"cx('list')\">\n        <li\n          [class]=\"getItemClass(item)\"\n          *ngFor=\"let item of items\"\n          (click)=\"refine($event, item)\"\n        >\n          <label [class]=\"cx('label')\">\n            <input\n              [class]=\"cx('checkbox')\"\n              type=\"checkbox\"\n              value=\"{{item.value}}\"\n              [checked]=\"item.isRefined\"\n            />\n            <span [class]=\"cx('labelText')\">\n              <ais-highlight attribute=\"highlighted\" [hit]=\"item\"></ais-highlight>\n            </span>\n            <span [class]=\"cx('count')\">{{item.count}}</span>\n          </label>\n        </li>\n      </ul>\n\n      <button\n        [class]=\"cx('showMore')\"\n        *ngIf=\"showMoreLimit && state.canToggleShowMore\"\n        (click)=\"state.toggleShowMore()\"\n      >\n        {{state.isShowingMore ? showLessLabel : showMoreLabel}}\n      </button>\n    </div>\n  `,\n})\nexport class NgAisRefinementList extends BaseWidget {\n  // render options\n  @Input() public showMoreLabel: string = 'Show more';\n  @Input() public showLessLabel: string = 'Show less';\n  @Input() public transformItems?: Function;\n  @Input() public searchable?: boolean;\n  @Input() public searchPlaceholder: string = 'Search here...';\n\n  // connectors options\n  @Input() public attribute: string;\n  @Input() public operator: 'or' | 'and' = 'or';\n  @Input() public limit: number | string = 10;\n  @Input() public showMoreLimit: number | string;\n  @Input() public sortBy: string[] | ((item: object) => number);\n\n  public state: RefinementListState = {\n    canRefine: false,\n    canToggleShowMore: false,\n    createURL: noop,\n    isShowingMore: false,\n    items: [],\n    refine: noop,\n    toggleShowMore: noop,\n    searchForItems: noop,\n    isFormSearch: false,\n  };\n\n  get isHidden() {\n    return this.state.items.length === 0 && this.autoHideContainer;\n  }\n\n  constructor(\n    @Inject(forwardRef(() => NgAisInstantSearch))\n    public instantSearchParent: any\n  ) {\n    super('RefinementList');\n  }\n\n  get items() {\n    return typeof this.transformItems === 'function'\n      ? this.transformItems(this.state.items)\n      : this.state.items;\n  }\n\n  public ngOnInit() {\n    this.createWidget(connectRefinementList, {\n      limit: parseNumberInput(this.limit),\n      showMoreLimit: parseNumberInput(this.showMoreLimit),\n      attributeName: this.attribute,\n      operator: this.operator,\n      sortBy: this.sortBy,\n      escapeFacetValues: true,\n    });\n\n    super.ngOnInit();\n  }\n\n  public refine(\n    event: MouseEvent,\n    item: { isRefined: boolean; value: string }\n  ) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (this.state.canRefine) {\n      // update UI directly, it will update the checkbox state\n      item.isRefined = !item.isRefined;\n\n      // refine through Algolia API\n      this.state.refine(item.value);\n    }\n  }\n}\n","import { Component, Input } from '@angular/core';\nimport { bem } from '../utils';\n\n@Component({\n  selector: 'ais-facets-search',\n  template: `\n    <div [class]=\"cx()\">\n      <form\n        [class]=\"cx('form')\"\n        (submit)=\"handleSubmit($event)\"\n        novalidate\n      >\n        <input\n          [class]=\"cx('input')\"\n          autocapitalize=\"off\"\n          autocorrect=\"off\"\n          placeholder=\"{{searchPlaceholder}}\"\n          role=\"textbox\"\n          spellcheck=\"false\"\n          type=\"text\"\n          [value]=\"searchQuery\"\n          (input)=\"handleChange($event.target.value)\"\n        />\n\n        <button\n          [class]=\"cx('submit')\"\n          title=\"Submit the search query.\"\n          type=\"submit\"\n        >\n          <svg\n            [ngClass]=\"cx('submitIcon')\"\n            viewBox=\"0 0 40 40\"\n            width=\"10\"\n            height=\"10\"\n          >\n            <path d=\"M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z\"></path>\n          </svg>\n        </button>\n\n        <button\n          [class]=\"cx('reset')\"\n          type=\"reset\"\n          title=\"Clear the search query.\"\n          hidden\n        >\n          <svg\n            [ngClass]=\"cx('resetIcon')\"\n            viewBox=\"0 0 20 20\"\n            width=\"10\"\n            height=\"10\"\n          >\n            <path d=\"M8.114 10L.944 2.83 0 1.885 1.886 0l.943.943L10 8.113l7.17-7.17.944-.943L20 1.886l-.943.943-7.17 7.17 7.17 7.17.943.944L18.114 20l-.943-.943-7.17-7.17-7.17 7.17-.944.943L0 18.114l.943-.943L8.113 10z\"></path>\n          </svg>\n        </button>\n      </form>\n    </div>\n  `,\n})\nexport class NgAisFacetsSearch {\n  @Input() public searchPlaceholder: string;\n  @Input() public search: Function;\n\n  public cx = bem('SearchBox');\n\n  public searchQuery = '';\n\n  public handleChange(value: string) {\n    this.searchQuery = value;\n    this.search(value);\n  }\n\n  public handleSubmit(event) {\n    event.preventDefault();\n    this.search(this.searchQuery);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { NgAisHighlightModule } from '../highlight/highlight.module';\nimport { NgAisRefinementList } from './refinement-list';\nimport { NgAisFacetsSearch } from './facets-search';\n\n@NgModule({\n  declarations: [NgAisRefinementList, NgAisFacetsSearch],\n  entryComponents: [NgAisRefinementList],\n  exports: [NgAisRefinementList],\n  imports: [CommonModule, NgAisHighlightModule],\n})\nexport class NgAisRefinementListModule {}\n","import {\n  Component,\n  Input,\n  Output,\n  EventEmitter,\n  Inject,\n  forwardRef,\n  ViewChild,\n  AfterViewInit,\n  ElementRef,\n} from '@angular/core';\n\nimport { connectSearchBox } from 'instantsearch.js/es/connectors';\nimport { BaseWidget } from '../base-widget';\nimport { NgAisInstantSearch } from '../instantsearch/instantsearch';\nimport { noop } from '../utils';\n\n@Component({\n  selector: 'ais-search-box',\n  template: `\n    <div [class]=\"cx()\">\n      <form\n        [class]=\"cx('form')\"\n        novalidate\n        (submit)=\"handleSubmit($event)\"\n      >\n        <input\n          [class]=\"cx('input')\"\n          autocapitalize=\"off\"\n          autocorrect=\"off\"\n          placeholder=\"{{placeholder}}\"\n          role=\"textbox\"\n          spellcheck=\"false\"\n          type=\"text\"\n          [value]=\"state.query\"\n          (input)=\"handleChange($event.target.value)\"\n          (focus)=\"focus.emit($event)\"\n          (blur)=\"blur.emit($event)\"\n          #searchBox\n        />\n\n        <button\n          [class]=\"cx('submit')\"\n          type=\"submit\"\n          title=\"{{submitTitle}}\"\n        >\n          <svg\n            [ngClass]=\"cx('submitIcon')\"\n            viewBox=\"0 0 40 40\"\n            width=\"40\"\n            height=\"40\"\n          >\n            <path d=\"M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z\"></path>\n          </svg>\n        </button>\n\n        <button\n          [class]=\"cx('reset')\"\n          type=\"reset\"\n          title=\"{{resetTitle}}\"\n          (click)=\"handleReset($event)\"\n          [hidden]=\"!state.query || (state.query && !state.query.trim())\">\n          <svg\n            [ngClass]=\"cx('resetIcon')\"\n            viewBox=\"0 0 20 20\"\n            width=\"20\"\n            height=\"20\"\n          >\n            <path d=\"M8.114 10L.944 2.83 0 1.885 1.886 0l.943.943L10 8.113l7.17-7.17.944-.943L20 1.886l-.943.943-7.17 7.17 7.17 7.17.943.944L18.114 20l-.943-.943-7.17-7.17-7.17 7.17-.944.943L0 18.114l.943-.943L8.113 10z\"></path>\n          </svg>\n        </button>\n      </form>\n    </div>\n  `,\n})\nexport class NgAisSearchBox extends BaseWidget implements AfterViewInit {\n  @ViewChild('searchBox') searchBox: ElementRef;\n  @Input() public placeholder: string = 'Search';\n  @Input() public submitTitle: string = 'Submit';\n  @Input() public resetTitle: string = 'Reset';\n  @Input() public searchAsYouType: boolean = true;\n  @Input() public autofocus: boolean = false;\n\n  // Output events\n  // form\n  @Output() submit = new EventEmitter();\n  @Output() reset = new EventEmitter();\n\n  // input\n  @Output() change = new EventEmitter();\n  @Output() focus = new EventEmitter();\n  @Output() blur = new EventEmitter();\n\n  public state = {\n    query: '',\n    refine: noop,\n  };\n\n  constructor(\n    @Inject(forwardRef(() => NgAisInstantSearch))\n    public instantSearchParent: any\n  ) {\n    super('SearchBox');\n    this.createWidget(connectSearchBox);\n  }\n\n  public ngAfterViewInit() {\n    if (this.autofocus) {\n      this.searchBox.nativeElement.focus();\n    }\n  }\n\n  public handleChange(query: string) {\n    this.change.emit(query);\n    if (this.searchAsYouType) {\n      this.state.refine(query);\n    }\n  }\n\n  public handleSubmit(event: Event) {\n    // send submit event to parent component\n    this.submit.emit(event);\n\n    event.preventDefault();\n\n    if (!this.searchAsYouType) {\n      this.state.refine(this.searchBox.nativeElement.value);\n    }\n  }\n\n  public handleReset(event: MouseEvent) {\n    // send reset event to parent component\n    this.reset.emit(event);\n\n    // reset search\n    this.state.refine('');\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { NgAisSearchBox } from './search-box';\n\n@NgModule({\n  declarations: [NgAisSearchBox],\n  entryComponents: [NgAisSearchBox],\n  exports: [NgAisSearchBox],\n  imports: [CommonModule],\n})\nexport class NgAisSearchBoxModule {}\n","import { Component, Input, Inject, forwardRef } from '@angular/core';\n\nimport { connectSortBySelector } from 'instantsearch.js/es/connectors';\nimport { BaseWidget } from '../base-widget';\nimport { NgAisInstantSearch } from '../instantsearch/instantsearch';\nimport { noop } from '../utils';\n\n@Component({\n  selector: 'ais-sort-by',\n  template: `\n    <div [class]=\"cx()\">\n      <select\n        [class]=\"cx('select')\"\n        (change)=\"state.refine($event.target.value)\"\n      >\n        <option\n          [class]=\"cx('option')\"\n          *ngFor=\"let item of state.options\"\n          [value]=\"item.value\"\n          [selected]=\"item.value === state.currentRefinement\"\n        >\n          {{item.label}}\n        </option>\n      </select>\n    </div>\n  `,\n})\nexport class NgAisSortBy extends BaseWidget {\n  @Input()\n  public items: {\n    name: string;\n    label: string;\n  }[];\n\n  public state: {\n    currentRefinement: string | null;\n    options: {}[];\n    refine: Function;\n  } = {\n    currentRefinement: null,\n    options: [],\n    refine: noop,\n  };\n\n  constructor(\n    @Inject(forwardRef(() => NgAisInstantSearch))\n    public instantSearchParent: any\n  ) {\n    super('SortBy');\n  }\n\n  public ngOnInit() {\n    this.createWidget(connectSortBySelector, { indices: this.items });\n    super.ngOnInit();\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { NgAisSortBy } from './sort-by';\n\n@NgModule({\n  declarations: [NgAisSortBy],\n  entryComponents: [NgAisSortBy],\n  exports: [NgAisSortBy],\n  imports: [CommonModule],\n})\nexport class NgAisSortByModule {}\n","import { Component, Input, Inject, forwardRef } from '@angular/core';\n\nimport { connectStarRating } from 'instantsearch.js/es/connectors';\nimport { BaseWidget } from '../base-widget';\nimport { NgAisInstantSearch } from '../instantsearch/instantsearch';\nimport { noop } from '../utils';\n\nexport type RatingMenuState = {\n  createURL: Function;\n  hasNoResults: boolean;\n  items: {}[];\n  refine: Function;\n};\n\n@Component({\n  selector: 'ais-rating-menu',\n  template: `\n    <div\n      [class]=\"cx()\"\n      *ngIf=\"!isHidden\"\n    >\n      <svg style=\"display:none;\">\n        <symbol\n          id=\"ais-StarRating-starSymbol\"\n          viewBox=\"0 0 24 24\"\n          width=\"24\"\n          height=\"24\"\n        >\n          <path d=\"M12 .288l2.833 8.718h9.167l-7.417 5.389 2.833 8.718-7.416-5.388-7.417 5.388 2.833-8.718-7.416-5.389h9.167z\"/>\n        </symbol>\n        <symbol\n          id=\"ais-StarRating-starEmptySymbol\"\n          viewBox=\"0 0 24 24\"\n          width=\"24\"\n          height=\"24\"\n        >\n          <path d=\"M12 6.76l1.379 4.246h4.465l-3.612 2.625 1.379 4.246-3.611-2.625-3.612 2.625 1.379-4.246-3.612-2.625h4.465l1.38-4.246zm0-6.472l-2.833 8.718h-9.167l7.416 5.389-2.833 8.718 7.417-5.388 7.416 5.388-2.833-8.718 7.417-5.389h-9.167l-2.833-8.718z\"/>\n        </symbol>\n      </svg>\n\n      <ul [class]=\"cx('list')\">\n        <li\n          *ngFor=\"let item of state.items\"\n          [class]=\"getItemClass(item)\"\n          (click)=\"handleClick($event, item.value)\"\n        >\n          <a\n            href=\"{{state.createURL(item.value)}}\"\n            [class]=\"cx('link')\"\n            (click)=\"handleClick($event, item.value)\"\n          >\n            <svg\n              *ngFor=\"let star of item.stars\"\n              [ngClass]=\"cx('starIcon')\"\n              aria-hidden=\"true\"\n            >\n              <use\n                *ngIf=\"star\"\n                xlink:href=\"#ais-StarRating-starSymbol\"\n              >\n              </use>\n\n              <use\n                *ngIf=\"!star\"\n                xlink:href=\"#ais-StarRating-starEmptySymbol\"\n              >\n              </use>\n            </svg>\n\n            <span [class]=\"cx('label')\" aria-hidden=\"true\">{{andUpLabel}}</span>\n            <span [class]=\"cx('count')\">{{item.count}}</span>\n          </a>\n        </li>\n      </ul>\n    </div>\n  `,\n})\nexport class NgAisRatingMenu extends BaseWidget {\n  // render options\n  @Input() public andUpLabel: string = '& Up';\n\n  // connectors options\n  @Input() public attribute: string;\n  @Input() public max?: number = 5;\n\n  public state: RatingMenuState = {\n    createURL: noop,\n    hasNoResults: false,\n    items: [],\n    refine: noop,\n  };\n\n  get isHidden() {\n    return this.state.items.length === 0 && this.autoHideContainer;\n  }\n\n  constructor(\n    @Inject(forwardRef(() => NgAisInstantSearch))\n    public instantSearchParent: any\n  ) {\n    super('RatingMenu');\n  }\n\n  public ngOnInit() {\n    this.createWidget(connectStarRating, {\n      attributeName: this.attribute,\n      max: this.max,\n    });\n    super.ngOnInit();\n  }\n\n  public handleClick(event: MouseEvent, value: string) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    this.state.refine(value);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { NgAisRatingMenu } from './rating-menu';\n\n@NgModule({\n  declarations: [NgAisRatingMenu],\n  entryComponents: [NgAisRatingMenu],\n  exports: [NgAisRatingMenu],\n  imports: [CommonModule],\n})\nexport class NgAisRatingMenuModule {}\n","import {\n  Component,\n  ContentChild,\n  TemplateRef,\n  Inject,\n  forwardRef,\n} from '@angular/core';\n\nimport { connectStats } from 'instantsearch.js/es/connectors';\n\nimport { BaseWidget } from '../base-widget';\nimport { NgAisInstantSearch } from '../instantsearch/instantsearch';\n\n@Component({\n  selector: 'ais-stats',\n  template: `\n    <div [class]=\"cx()\">\n      <ng-container *ngTemplateOutlet=\"template; context: templateContext\">\n      </ng-container>\n\n      <span *ngIf=\"!template\" [class]=\"cx('text')\">\n        {{state.nbHits}} results found in {{state.processingTimeMS}}ms.\n      </span>\n    </div>\n  `,\n})\nexport class NgAisStats extends BaseWidget {\n  @ContentChild(TemplateRef) public template: any;\n\n  public state = {\n    hitPerPage: 0,\n    nbHits: 0,\n    nbPages: 0,\n    page: 0,\n    processingTimeMS: 0,\n    query: '',\n  };\n\n  get templateContext() {\n    return { state: this.state };\n  }\n\n  constructor(\n    @Inject(forwardRef(() => NgAisInstantSearch))\n    public instantSearchParent: any\n  ) {\n    super('Stats');\n    this.createWidget(connectStats);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { NgAisStats } from './stats';\n\n@NgModule({\n  declarations: [NgAisStats],\n  entryComponents: [NgAisStats],\n  exports: [NgAisStats],\n  imports: [CommonModule],\n})\nexport class NgAisStatsModule {}\n","import { Component, Input, Inject, forwardRef } from '@angular/core';\n\nimport { connectToggle } from 'instantsearch.js/es/connectors';\nimport { BaseWidget } from '../base-widget';\nimport { NgAisInstantSearch } from '../instantsearch/instantsearch';\nimport { noop } from '../utils';\n\nexport type ToggleState = {\n  createURL: Function;\n  refine: Function;\n  value: {\n    name?: string;\n    count?: number;\n    isRefined?: boolean;\n  };\n};\n\n@Component({\n  selector: 'ais-toggle',\n  template: `\n    <div [class]=\"cx()\">\n      <ul [class]=\"cx('list')\">\n        <li\n          [class]=\"cx('item')\"\n          (click)=\"handleClick($event)\">\n          <label [class]=\"cx('label')\">\n            <input\n              [class]=\"cx('checkbox')\"\n              type=\"checkbox\"\n              value=\"{{state.value.name}}\"\n              [checked]=\"state.value.isRefined\"\n            />\n\n            <span [class]=\"cx('labelText')\">\n              {{label || state.value.name}}\n            </span>\n\n            <span [class]=\"cx('count')\">{{state.value.count}}</span>\n          </label>\n        </li>\n      </ul>\n    </div>\n  `,\n})\nexport class NgAisToggle extends BaseWidget {\n  // connector options\n  @Input() public attribute: string;\n  @Input() public label: string;\n  @Input()\n  public values: { on?: boolean; off?: boolean } = { on: true, off: undefined };\n\n  public state: ToggleState = {\n    createURL: noop,\n    refine: noop,\n    value: {},\n  };\n\n  constructor(\n    @Inject(forwardRef(() => NgAisInstantSearch))\n    public instantSearchParent: any\n  ) {\n    super('ToggleRefinement');\n  }\n\n  public ngOnInit() {\n    this.createWidget(connectToggle, {\n      attributeName: this.attribute,\n      label: this.label,\n      values: this.values,\n    });\n    super.ngOnInit();\n  }\n\n  public handleClick(event: MouseEvent) {\n    event.preventDefault();\n    event.stopPropagation();\n    this.state.refine(this.state.value);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { NgAisToggle } from './toggle';\n\n@NgModule({\n  declarations: [NgAisToggle],\n  entryComponents: [NgAisToggle],\n  exports: [NgAisToggle],\n  imports: [CommonModule],\n})\nexport class NgAisToggleModule {}\n","import { Inject, Component, Input, forwardRef } from '@angular/core';\n\nimport { connectRange } from 'instantsearch.js/es/connectors';\nimport { BaseWidget } from '../base-widget';\nimport { NgAisInstantSearch } from '../instantsearch/instantsearch';\nimport { parseNumberInput, noop } from '../utils';\n\nexport type NumericRangeState = {\n  range: { min?: number; max?: number };\n  refine: Function;\n  start: number[];\n};\n\n@Component({\n  selector: 'ais-range-input',\n  template: `\n    <div [class]=\"cx()\">\n      <form\n        [class]=\"cx('form')\"\n        (submit)=\"handleSubmit($event)\"\n        novalidate\n      >\n        <label [class]=\"cx('label')\">\n          <span [class]=\"cx('currency')\">{{currency}}</span>\n          <input\n            [class]=\"cx('input', 'min')\"\n            type=\"number\"\n            [min]=\"state.range.min\"\n            [max]=\"state.range.max\"\n            [placeholder]=\"state.range.min\"\n            [value]=\"minInputValue\"\n            [step]=\"step\"\n            (change)=\"handleChange($event, 'min')\"\n          />\n        </label>\n\n        <span [class]=\"cx('separator')\">{{separator}}</span>\n\n        <label [class]=\"cx('label')\">\n          <span [class]=\"cx('currency')\">{{currency}}</span>\n          <input\n            [class]=\"cx('input', 'max')\"\n            type=\"number\"\n            [min]=\"state.range.min\"\n            [max]=\"state.range.max\"\n            [placeholder]=\"state.range.max\"\n            [value]=\"maxInputValue\"\n            [step]=\"step\"\n            (change)=\"handleChange($event, 'max')\"\n          />\n        </label>\n\n        <button\n          [class]=\"cx('submit')\"\n          (click)=\"handleSubmit($event)\"\n        >\n          {{submitLabel}}\n        </button>\n      </form>\n    </div>\n  `,\n})\nexport class NgAisRangeInput extends BaseWidget {\n  // render options\n  @Input() public currency: string = '$';\n  @Input() public separator: string = 'to';\n  @Input() public submitLabel: string = 'Go';\n\n  // connector options\n  @Input() public attribute: string;\n  @Input() public min?: number | string;\n  @Input() public max?: number | string;\n  @Input() public precision: number | string = 2;\n\n  // inner state\n  public minInputValue?: number | string = '';\n  public maxInputValue?: number | string = '';\n\n  get step() {\n    const precision = parseNumberInput(this.precision) || 2;\n    return 1 / Math.pow(10, precision);\n  }\n\n  public state: NumericRangeState = {\n    range: { min: undefined, max: undefined },\n    refine: noop,\n    start: [0, 0],\n  };\n\n  constructor(\n    @Inject(forwardRef(() => NgAisInstantSearch))\n    public instantSearchParent: any\n  ) {\n    super('RangeInput');\n  }\n\n  public ngOnInit() {\n    this.createWidget(connectRange, {\n      attributeName: this.attribute,\n      max: parseNumberInput(this.max),\n      min: parseNumberInput(this.min),\n      precision: parseNumberInput(this.precision),\n    });\n\n    super.ngOnInit();\n  }\n\n  public handleChange(event: any, type: string) {\n    const value = parseNumberInput(event.target.value);\n\n    if (type === 'min') {\n      this.minInputValue = value;\n    } else {\n      this.maxInputValue = value;\n    }\n  }\n\n  public handleSubmit(event: MouseEvent | KeyboardEvent) {\n    event.preventDefault();\n    this.state.refine([this.minInputValue, this.maxInputValue]);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { NgAisRangeInput } from './range-input';\n\n@NgModule({\n  declarations: [NgAisRangeInput],\n  entryComponents: [NgAisRangeInput],\n  exports: [NgAisRangeInput],\n  imports: [CommonModule],\n})\nexport class NgAisRangeInputModule {}\n","import { Component, Input } from '@angular/core';\n\n@Component({\n  selector: 'ais-panel',\n  template: `\n    <div class=\"ais-Panel\">\n      <div *ngIf=\"header\" class=\"ais-Panel-header\">\n        {{header}}\n      </div>\n\n      <div class=\"ais-Panel-body\">\n        <ng-content></ng-content>\n      </div>\n\n      <div *ngIf=\"footer\" class=\"ais-Panel-footer\">\n        {{footer}}\n      </div>\n    </div>\n  `,\n})\nexport class NgAisPanel {\n  @Input() public header?: string;\n  @Input() public footer?: string;\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { NgAisPanel } from './panel';\nexport { NgAisPanel } from './panel';\n\n@NgModule({\n  declarations: [NgAisPanel],\n  entryComponents: [NgAisPanel],\n  exports: [NgAisPanel],\n  imports: [CommonModule],\n})\nexport class NgAisPanelModule {}\n","import {\n  Component,\n  Input,\n  Inject,\n  forwardRef,\n  KeyValueDiffer,\n  KeyValueDiffers,\n  Testability,\n} from '@angular/core';\n\nimport { connectConfigure } from 'instantsearch.js/es/connectors';\nimport { BaseWidget } from '../base-widget';\nimport {\n  NgAisInstantSearch,\n  SearchParameters,\n} from '../instantsearch/instantsearch';\nimport { noop } from '../utils';\n\n@Component({\n  selector: 'ais-configure',\n  template: '',\n})\nexport class NgAisConfigure extends BaseWidget {\n  private internalSearchParameters: SearchParameters;\n  private differ: KeyValueDiffer<string, any>; // SearchParameters (I don't know how to get the values of the type)\n\n  public state: { refine: Function } = {\n    refine: noop,\n  };\n\n  constructor(\n    private differs: KeyValueDiffers,\n    @Inject(forwardRef(() => NgAisInstantSearch))\n    public instantSearchParent: any\n  ) {\n    super('Configure');\n  }\n\n  @Input()\n  set searchParameters(values: SearchParameters) {\n    this.internalSearchParameters = values;\n    if (!this.differ && values) {\n      this.differ = this.differs.find(values).create();\n    }\n  }\n\n  public ngOnInit() {\n    this.createWidget(connectConfigure, {\n      searchParameters: this.internalSearchParameters,\n    });\n    super.ngOnInit();\n  }\n\n  ngDoCheck() {\n    if (this.differ) {\n      const changes = this.differ.diff(this.internalSearchParameters);\n      if (changes) {\n        this.state.refine(this.internalSearchParameters);\n      }\n    }\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { NgAisConfigure } from './configure';\n\n@NgModule({\n  declarations: [NgAisConfigure],\n  entryComponents: [NgAisConfigure],\n  exports: [NgAisConfigure],\n  imports: [CommonModule],\n})\nexport class NgAisConfigureModule {}\n","import * as algoliasearchProxy from 'algoliasearch/index';\nimport * as encodeProxy from 'querystring-es3/encode';\nimport { VERSION as AngularVersion } from '@angular/core';\nimport { VERSION } from './version';\n\n// AOT + Rollup workaround\n// https://github.com/rollup/rollup/issues/1267#issuecomment-296395734\n\nconst algoliasearch = algoliasearchProxy.default || algoliasearchProxy;\nconst encode = encodeProxy.default || encodeProxy;\n\nexport function createSSRAlgoliaClient({\n  httpClient,\n  HttpHeaders,\n  transferState,\n  makeStateKey,\n  options = {},\n}) {\n  console.warn(\n    '`createSSRAlgoliaClient` is deprecated in favor of `createSSRSearchClient` to be plugged to `searchClient`.'\n  );\n\n  return (_, appId, apiKey) =>\n    createSSRSearchClient({\n      appId,\n      apiKey,\n      httpClient,\n      HttpHeaders,\n      transferState,\n      makeStateKey,\n      options,\n    });\n}\n\nexport function createSSRSearchClient({\n  appId,\n  apiKey,\n  httpClient,\n  HttpHeaders,\n  transferState,\n  makeStateKey,\n  options = {},\n}) {\n  const client = algoliasearch(appId, apiKey, options);\n  client.addAlgoliaAgent(`angular (${AngularVersion.full})`);\n  client.addAlgoliaAgent(`angular-instantsearch (${VERSION})`);\n  client.addAlgoliaAgent(`angular-instantsearch-server (${VERSION})`);\n\n  client._request = (rawUrl, opts) => {\n    let headers = new HttpHeaders();\n\n    headers = headers.set(\n      'content-type',\n      opts.method === 'POST'\n        ? 'application/x-www-form-urlencoded'\n        : 'application/json'\n    );\n\n    headers = headers.set('accept', 'application/json');\n\n    const url =\n      rawUrl + (rawUrl.includes('?') ? '&' : '?') + encode(opts.headers);\n\n    const transferStateKey = makeStateKey(`ngais(${opts.body})`);\n\n    if (transferState.hasKey(transferStateKey)) {\n      const resp = JSON.parse(transferState.get(transferStateKey, {}));\n      return Promise.resolve({\n        statusCode: resp.status,\n        body: resp.body,\n        headers: resp.headers,\n      });\n    }\n\n    return new Promise((resolve, reject) => {\n      httpClient\n        .request(opts.method, url, {\n          headers,\n          body: opts.body,\n          observe: 'response',\n        })\n        .subscribe(\n          resp => {\n            transferState.set(transferStateKey, JSON.stringify(resp));\n            resolve({\n              statusCode: resp.status,\n              body: resp.body,\n              headers: resp.headers,\n            });\n          },\n          resp =>\n            reject({\n              statusCode: resp.status,\n              body: resp.body,\n              headers: resp.headers,\n            })\n        );\n    });\n  };\n\n  return client;\n}\n","import { ModuleWithProviders, NgModule } from '@angular/core';\n\n// Modules\nimport { NgAisBreadcrumbModule } from './breadcrumb/breadcrumb.module';\nexport { NgAisBreadcrumbModule };\nimport { NgAisClearRefinementsModule } from './clear-refinements/clear-refinements.module';\nexport { NgAisClearRefinementsModule };\nimport { NgAisCurrentRefinementsModule } from './current-refinements/current-refinements.module';\nexport { NgAisCurrentRefinementsModule };\nimport { NgAisHierarchicalMenuModule } from './hierarchical-menu/hierarchical-menu.module';\nexport { NgAisHierarchicalMenuModule };\nimport { NgAisHitsPerPageModule } from './hits-per-page/hits-per-page.module';\nexport { NgAisHitsPerPageModule };\nimport { NgAisHitsModule } from './hits/hits.module';\nexport { NgAisHitsModule };\nimport { NgAisInfiniteHitsModule } from './infinite-hits/infinite-hits.module';\nexport { NgAisInfiniteHitsModule };\nimport { NgAisInstantSearchModule } from './instantsearch/instantsearch.module';\nexport { NgAisInstantSearchModule };\nimport { NgAisMenuModule } from './menu/menu.module';\nexport { NgAisMenuModule };\nimport { NgAisNumericMenuModule } from './numeric-menu/numeric-menu.module';\nexport { NgAisNumericMenuModule };\nimport { NgAisNumericSelectorModule } from './numeric-selector/numeric-selector.module';\nexport { NgAisNumericSelectorModule };\nimport { NgAisPaginationModule } from './pagination/pagination.module';\nexport { NgAisPaginationModule };\nimport { NgAisRangeSliderModule } from './range-slider/range-slider.module';\nexport { NgAisRangeSliderModule };\nimport { NgAisRefinementListModule } from './refinement-list/refinement-list.module';\nexport { NgAisRefinementListModule };\nimport { NgAisSearchBoxModule } from './search-box/search-box.module';\nexport { NgAisSearchBoxModule };\nimport { NgAisSortByModule } from './sort-by/sort-by.module';\nexport { NgAisSortByModule };\nimport { NgAisRatingMenuModule } from './rating-menu/rating-menu.module';\nexport { NgAisRatingMenuModule };\nimport { NgAisStatsModule } from './stats/stats.module';\nexport { NgAisStatsModule };\nimport { NgAisToggleModule } from './toggle/toggle.module';\nexport { NgAisToggleModule };\nimport { NgAisHighlightModule } from './highlight/highlight.module';\nexport { NgAisHighlightModule };\nimport { NgAisRangeInputModule } from './range-input/range-input.module';\nexport { NgAisRangeInputModule };\nimport { NgAisPanelModule } from './panel/panel.module';\nexport { NgAisPanelModule };\nimport { NgAisConfigureModule } from './configure/configure.module';\nexport { NgAisConfigureModule };\n\n// Custom SSR algoliasearchClient\nimport {\n  createSSRAlgoliaClient,\n  createSSRSearchClient,\n} from './create-ssr-algolia-client';\nexport { createSSRAlgoliaClient, createSSRSearchClient };\n\nimport { parseServerRequest } from './parse-server-request';\nexport { parseServerRequest };\n\n// Custom widget with BaseWidget class\nimport { BaseWidget, Widget, Connector } from './base-widget';\nexport { BaseWidget, Widget, Connector };\n\nimport { NgAisInstantSearch } from './instantsearch/instantsearch';\nexport { NgAisInstantSearch };\n\nconst NGIS_MODULES = [\n  NgAisInstantSearchModule,\n  NgAisHitsModule,\n  NgAisSearchBoxModule,\n  NgAisClearRefinementsModule,\n  NgAisMenuModule,\n  NgAisPaginationModule,\n  NgAisRefinementListModule,\n  NgAisHitsPerPageModule,\n  NgAisSortByModule,\n  NgAisNumericSelectorModule,\n  NgAisNumericMenuModule,\n  NgAisStatsModule,\n  NgAisToggleModule,\n  NgAisInfiniteHitsModule,\n  NgAisCurrentRefinementsModule,\n  NgAisHierarchicalMenuModule,\n  NgAisRatingMenuModule,\n  NgAisRangeSliderModule,\n  NgAisBreadcrumbModule,\n  NgAisHighlightModule,\n  NgAisRangeInputModule,\n  NgAisPanelModule,\n  NgAisConfigureModule,\n];\n\n@NgModule({\n  exports: NGIS_MODULES,\n  imports: [NgAisInstantSearchModule.forRoot()],\n})\nexport class NgAisRootModule {}\n\n@NgModule({ imports: NGIS_MODULES, exports: NGIS_MODULES })\nexport class NgAisModule {\n  public static forRoot(): ModuleWithProviders {\n    return { ngModule: NgAisRootModule };\n  }\n}\n","import { AlgoliaSearchHelper } from 'algoliasearch-helper';\n\n// Transforms url query to SearchParameters\nexport function parseServerRequest(req: { url: string } | void) {\n  if (req && req.url && req.url.includes('?')) {\n    const query = req.url.split('?')[1];\n    return AlgoliaSearchHelper.getConfigurationFromQueryString(query);\n  }\n\n  return {};\n}\n"]}